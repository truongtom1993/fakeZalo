var fe=Object.defineProperty,xe=Object.defineProperties;var ye=Object.getOwnPropertyDescriptors;var X=Object.getOwnPropertySymbols;var ve=Object.prototype.hasOwnProperty,Ee=Object.prototype.propertyIsEnumerable;var Z=(t,r,a)=>r in t?fe(t,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[r]=a,w=(t,r)=>{for(var a in r||(r={}))ve.call(r,a)&&Z(t,a,r[a]);if(X)for(var a of X(r))Ee.call(r,a)&&Z(t,a,r[a]);return t},j=(t,r)=>xe(t,ye(r));import{u as q,j as e,r as o,h as E,c as G,n as A,a as n,M as be,b as Ne,I as Q,d as we,e as De,f as Me,g as ee,F as te,i as re,k as Fe,l as Ce,B as Ae,m as $,T as k,o as Re,p as Te,G as Le,q as Ie,s as ke,t as S,v as f,S as R,w as D,x as O,C as ae,D as T,y as se,z as M,A as Se,E as Ye,U as je,H as He,J as Be,K as Ue,L as $e,N as Oe,O as _e,R as Ve,P as Pe}from"./vendor.6f80fc7d.js";const qe=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function a(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerpolicy&&(l.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?l.credentials="include":s.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(s){if(s.ep)return;s.ep=!0;const l=a(s);fetch(s.href,l)}};qe();const Y=q,H=({width:t,height:r,isFirstMessage:a,isLastOfMessageList:i})=>{const s=Y(l=>l.profileReducer.profile.avatarURL);return e(o.exports.Fragment,{children:a||i?e("div",{className:"rounded-full w-7 h-7 border bg-center bg-cover bg-no-repeat box-content flex-shrink-0",style:{backgroundImage:`url(${s})`,width:t,height:r}}):e("div",{className:"rounded-full w-7 h-7 box-content flex-shrink-0",style:{width:t,height:r}})})},Ge=(t,r)=>{var i;const a={type:t.messageType};switch(t.messageType){case"text":Object.assign(a,{textContent:t.textContent});break;case"call":Object.assign(a,{callType:t.callType,callDuration:t.callDuration});break;case"image":Object.assign(a,{imageUrl:t.imageURL});break;case"record":Object.assign(a,{recordDuration:t.recordDuration});break}return{index:t.index,id:t.idMessage,messageReply:r,author:t.user,message:a,time:{type:t.timeType,value:typeof t.timeValue=="object"?(i=t.timeValue)==null?void 0:i.format("YYYY-MM-DD HH:mm:ss"):""},emoji:{show:!!t.emoji,type:t.emoji,number:t.numberEmoji}}},Je=t=>{var i,s,l,u,c,m,p,g;const r=(i=t.time)==null?void 0:i.value,a={index:t.index,user:t==null?void 0:t.author,idMessage:(t==null?void 0:t.id)||"",idReply:t==null?void 0:t.messageReply.idReply,timeType:((s=t==null?void 0:t.time)==null?void 0:s.type)||null,timeValue:E(new Date(r)),emoji:((l=t==null?void 0:t.emoji)==null?void 0:l.type)||void 0,numberEmoji:((u=t==null?void 0:t.emoji)==null?void 0:u.number)||void 0,messageType:(c=t==null?void 0:t.message)==null?void 0:c.type,textContent:"",imageURL:"",callType:"",callDuration:"",recordDuration:""};switch(t.message.type){case"text":a.textContent=t.message.textContent||"";break;case"image":a.imageURL=((m=t.message)==null?void 0:m.imageUrl)||"";break;case"call":a.callType=t.message.callType||"",a.callDuration=((p=t.message.callDuration)==null?void 0:p.toString())||"";break;case"record":a.recordDuration=((g=t.message.recordDuration)==null?void 0:g.toString())||"";break}return a},B=t=>{const r=t.split(":"),a=r[1],i=r[0].split(" "),s=i[i.length-1];return`${Number.parseInt(s)}:${a}`},ze=(t,r)=>({type:t.message.type,idReply:t.id,index:r,data:{author:t.author,message:t.message}}),le={idReply:"",index:-1},ne={index:-1,id:"abcde",messageReply:{idReply:"",index:-1},author:"me",message:{type:"text",textContent:""},time:{type:null,value:E().format("YYYY-MM-DD HH:mm:ss")},emoji:{show:!1,type:null,number:0}},ie=localStorage.getItem("currentMessage"),We=ie?JSON.parse(ie):ne,ce=G({name:"currentMessage",initialState:{currentMessage:We,currentMessageReply:le},reducers:{importCurrentMessage(t,r){t.currentMessage=r.payload.currentMessage,t.currentMessageReply=r.payload.currentMessageReply},changeCurrentMessage(t,r){t.currentMessage=r.payload},changeCurrentMessageReply(t,r){t.currentMessageReply=r.payload}}}),{changeCurrentMessage:U,changeCurrentMessageReply:Ke,importCurrentMessage:Xe}=ce.actions;var Ze=ce.reducer,x;(function(t){t.HeartEmpty="heartEmpty",t.Like="/-strong",t.Heart="/-heart",t.Lol=":>",t.Wow=":o",t.Cry=":-((",t.Angry=":-h"})(x||(x={}));const Qe=[{index:0,id:A(5),messageReply:{idReply:"",index:-1},author:"me",message:{type:"image",imageUrl:"https://images.unsplash.com/photo-1654293998081-9deefc0b27b3?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=687&q=80"},time:{type:"auto",value:E().format("YYYY-MM-DD HH:mm:ss")},emoji:{show:!0,type:x.Heart,number:2}},{index:1,id:A(5),messageReply:{idReply:"",index:-1},author:"me",message:{type:"text",textContent:"Lorem ipsum dolor sit amet consectetur, adipisicing elit. Iste voluptates illum officiis dignissimos iure dolor sit, quo ipsum! Dolorem quam consectetur aut. Ex quo optio corrupti eius? Tempore debitis ut ipsum ullam nemo eum, eaque sed et culpa adipisci fuga modi fugiat eveniet magni deleniti quam dolor iure dignissimos eius vel vero cum, deserunt earum ducimus! Aperiam vero adipisci aut voluptatum at quisquam, culpa veritatis vel ratione autem iste, nihil laudantium fugit magnam? Quas veritatis maiores, veniam voluptates doloribus corporis aspernatur nisi eos aut dolorum animi, voluptatibus dolores obcaecati ea voluptas iusto eius omnis voluptatem. Sint reiciendis ea perspiciatis vel!"},time:{type:"auto",value:E().format("YYYY-MM-DD HH:mm:ss")}},{index:2,id:A(5),messageReply:{idReply:"",index:-1},author:"you",message:{type:"text",textContent:"Xin c\u1EA3m \u01A1n r\u1EA5t nhi\u1EC1u"},time:{type:"auto",value:E().format("YYYY-MM-DD HH:mm:ss")}},{index:3,id:A(5),messageReply:{idReply:"",index:-1},author:"you",message:{type:"record",recordDuration:20},time:{type:"auto",value:E().format("YYYY-MM-DD HH:mm:ss")}},{index:4,id:A(5),messageReply:{idReply:"",index:-1},author:"you",message:{type:"call",callType:"incomming",callDuration:15},time:{type:"auto",value:E().format("YYYY-MM-DD HH:mm:ss")}}];A(5),E().format("YYYY-MM-DD HH:mm:ss");const et=localStorage.getItem("messageList")?JSON.parse(localStorage.getItem("messageList")):Qe,oe=G({name:"messageList",initialState:{data:et},reducers:{importMessageList(t,r){t.data=r.payload.data},addMessage(t,r){r.payload.index>=0?t.data.splice(r.payload.index,0,w({},r.payload.data)):t.data.push(j(w({},r.payload.data),{id:A(5),index:t.data.length+1}))},removeMessageByIndex(t,r){t.data.splice(r.payload,1)},changeMessageById(t,r){const{payload:a}=r,i=t.data.findIndex(s=>s.id===a.id);t.data[i]=a.data},setRandomTime(t,r){const a=E(r.payload.startTime);let i=r.payload.stepTime;t.data.forEach(s=>{const l=a.add(i,"s").format("YYYY-MM-DD HH:mm:ss");s.time.value=l,i=tt(100,r.payload.stepTime)})}}});function tt(t,r){return Math.round(Math.random()*(r-t))+t}const{addMessage:J,removeMessageByIndex:rt,changeMessageById:at,setRandomTime:st,importMessageList:me}=oe.actions;var lt=oe.reducer;function z(t){const r=E().format("YYYY-MM-DD HH:mm:ss");return{index:t,author:"me",messageReply:{index:-1,idReply:""},message:{type:"text",textContent:`Example Textcontent ${r}`},id:A(5),time:{type:"auto",value:r},emoji:{show:!1}}}const F=({time:t,author:r,message:a})=>{function i(s){if(r==="me")return a.type==="text"?e("p",{className:"timeStamp_text_me_inner ",children:B(s.value)}):e("span",{className:"text-[10px] text-gray-100 font-segoe tracking-widest bg-gray-400 self-start rounded-xl px-1 mt-2",children:B(s.value)});if(r==="you")return a.type==="text"?e("p",{className:"timeStamp_text_you_inner",children:B(s.value)}):a.type==="call"?e("span",{className:"text-[10px] text-gray-100 font-segoe tracking-widest bg-gray-400 self-start rounded-xl px-1 mt-2",children:B(s.value)}):e("span",{className:"text-[10px] text-gray-100 font-segoe tracking-widest bg-gray-400 self-start rounded-xl px-1 ml-9 mt-2",children:B(s.value)})}return e(o.exports.Fragment,{children:i(t)})},nt=({index:t,data:r,isFirstMessage:a,isLastMessage:i})=>{const{author:s,message:l,time:u,emoji:c}=r,{type:m}=l;function p(y){const v=Math.floor(y/60),b=y-v*60;if(v<10)return b>=10?`0${v} ph\xFAt ${b} gi\xE2y`:`0${v} ph\xFAt 0${b} gi\xE2y`;if(v>=10)return b>=10?`${v} ph\xFAt ${b} gi\xE2y`:`${v} ph\xFAt 0${b} gi\xE2y`}function g(){return n(o.exports.Fragment,{children:[e("div",{className:"border-b border-b-gray-500 opacity-20"}),e("div",{className:"h-[32px] text-sm text-center leading-[32px] font-semibold text-blue-500",children:"G\u1ECCI L\u1EA0I"})]})}function d(){if(m==="call")switch(l.callType){case"incomming":return n(o.exports.Fragment,{children:[n("div",{className:`call_container ${s==="me"?"bg-[#D5F1FF]":"bg-white"}`,children:[n("div",{className:"flex-grow flex flex-col text-xs ",children:[e("div",{className:"flex-shrink-0 ml-2 flex items-end font-semibold mt-[0.35rem]",children:e("span",{className:"tracking-wide",children:"Cu\u1ED9c g\u1ECDi tho\u1EA1i \u0111\u1EBFn"})}),n("div",{className:"flex items-center ml-2 ",children:[n("div",{className:"relative",children:[e(Q,{className:"fill-gray-500"}),e(De,{className:"fill-green-500 scale-[.6] absolute left-[0.15rem] bottom-[0.15rem]"})]}),e("div",{className:"call_duration ml-1 text-gray-700",children:p(l.callDuration)})]})]}),g()]}),i&&e(F,{time:u,message:l,author:s})]});case"outgoing":return n(o.exports.Fragment,{children:[n("div",{className:`call_container ${s==="me"?"bg-[#D5F1FF]":"bg-white"}`,children:[n("div",{className:"flex-grow flex flex-col text-xs ",children:[e("div",{className:"flex-shrink-0 ml-2 flex items-end font-semibold mt-[0.35rem] ",children:e("span",{className:"tracking-wide",children:"Cu\u1ED9c g\u1ECDi tho\u1EA1i \u0111i"})}),n("div",{className:"flex items-center ml-2 ",children:[n("div",{className:"relative",children:[e(Q,{className:"fill-gray-500"}),e(we,{className:"fill-green-500 scale-[.6] absolute left-[0.15rem] bottom-[0.15rem]"})]}),e("div",{className:"call_duration ml-1 text-gray-700",children:p(l.callDuration)})]})]}),g()]}),i&&e(F,{time:u,message:l,author:s})]});case"missed":return n(o.exports.Fragment,{children:[n("div",{className:`call_container ${s==="me"?"bg-[#D5F1FF]":"bg-white"}`,children:[n("div",{className:"flex-grow flex flex-col text-xs ",children:[e("div",{className:"flex-shrink-0 ml-2 flex items-end font-semibold mt-[0.35rem] ",children:e("span",{className:"text-red-500 tracking-wide",children:"B\u1EA1n b\u1ECB nh\u1EE1"})}),n("div",{className:"flex items-center ml-2 ",children:[n("div",{className:"relative h-full w-3",children:[e(be,{className:"fill-red-500 absolute top-1"}),e(Ne,{className:"fill-red-500 scale-[.6] absolute bottom-[5px]"})]}),e("div",{className:"call_duration ml-1 text-gray-700",children:"Cu\u1ED9c g\u1ECDi tho\u1EA1i"})]})]}),g()]}),i&&e(F,{time:u,message:l,author:s})]})}}if(s==="you")return n("div",{className:"flex mb-1",children:[e(H,{isFirstMessage:a}),e("div",{className:"ml-1 ",children:d()})]});if(s==="me")return e("div",{className:"flex mb-1 mr-2 ",children:e("div",{className:"ml-auto",children:d()})})},ue={[x.HeartEmpty]:"heartEmpty",[x.Like]:"84% 82.5% / 5100%",[x.Heart]:"84% 72.5% / 5100%",[x.Lol]:"82% 7.5% / 5100%",[x.Wow]:"84% 20% / 5100%",[x.Cry]:"84% 2.5% / 5100%",[x.Angry]:"84% 5% / 5100%"},it=Object.keys(ue);console.info("\u{1F381} src/constant/index.ts	Line:14	ID:bdeb8a",it);const ct="https://i.postimg.cc/yxT1L8my/all-emoji.png",_=({type:t})=>{function r(a){return a===x.HeartEmpty?e(Me,{className:"opacity-70"}):e("span",{className:"emoji-sizer",style:{background:`url(${ct}) repeat scroll ${ue[a]}`},children:a})}return e(o.exports.Fragment,{children:r(t)})},V=({type:t,number:r,author:a,isEndOfList:i})=>{const s=o.exports.useRef(null);return o.exports.useEffect(()=>{let l;return s.current&&(l=s.current.parentElement,l.classList.add("mb-[14px]")),()=>{l&&l.classList.remove("mb-[14px]")}},[t]),n(o.exports.Fragment,{children:[a==="you"&&i&&n("div",{className:"flex_emoji",ref:s,children:[r>0&&n("div",{className:"icon_count_emoji mr-1",children:[e(_,{type:t}),e("span",{className:"ml-[0.15rem] text-gray-400 font-segoe",children:r})]}),e("div",{className:"icon-emoji",children:e(_,{type:x.HeartEmpty})})]}),t&&r>0&&n("div",{className:"flex_emoji",ref:s,children:[n("div",{className:"icon_count_emoji mr-1",children:[e(_,{type:t}),e("span",{className:"ml-[0.15rem] text-gray-400 font-segoe",children:r})]}),e("div",{className:"icon-emoji",children:e(_,{type:a==="me"||i?x.HeartEmpty:t})})]})]})},ot=({index:t,data:r,isFirstMessage:a,isLastMessage:i})=>{const{author:s,message:l,time:u,emoji:c}=r;function m(){if(s==="you")return n("div",{className:"flex flex-col mb-2",children:[n("div",{className:"flex",children:[e(H,{isFirstMessage:a}),n("div",{className:"message-image-flx",children:[e("img",{src:l.type==="image"&&l.imageUrl,alt:"image-content",className:"message-image"}),e("span",{className:"hd-label",children:"HD"}),e(V,{type:c==null?void 0:c.type,number:c==null?void 0:c.number,author:s})]}),e("div",{className:"icon-share-image",children:e(ee,{})})]}),i&&e(F,{time:u,message:l,author:s})]});if(s==="me")return n("div",{className:"flex flex-col mb-2",children:[e(te,{children:n("div",{className:"flex flex-row-reverse mr-2",children:[n("div",{className:"message-image-flx",children:[e("img",{src:l.type==="image"&&l.imageUrl,alt:"image-content",className:"message-image"}),e("span",{className:"hd-label",children:"HD"}),e(V,{type:c==null?void 0:c.type,number:c==null?void 0:c.number,author:s})]}),e("div",{className:"icon-share-image",children:e(ee,{})})]})}),e("div",{className:"ml-10",children:i&&e(F,{time:u,message:l,author:s})})]})}return e(o.exports.Fragment,{children:m()})},mt=({index:t,data:r,isFirstMessage:a,isLastMessage:i})=>{const{author:s,message:l,time:u,emoji:c}=r;function m(g){const d=Math.floor(g/60),y=g-d*60;if(d<10)return y>=10?`0${d}:${y}`:`0${d}:0${y}`;if(d>=10)return y>=10?`${d}:${y}`:`${d}:0${y}`}function p(){if(s==="you")return n(o.exports.Fragment,{children:[n("div",{className:"flex",children:[e(H,{isFirstMessage:a}),n("div",{className:"bg-white ml-1 rounded-xl border border-gray-300 border-opacity-80 flex flex-shrink-0 w-[146px] h-[47px] p-2 items-center relative",children:[e("div",{className:"icon-play w-7 h-7 bg-blue-500 rounded-full flex justify-center items-center",children:e(re,{className:"fill-white ml-1"})}),n("div",{className:"progess-icon-group flex self-center mt-1 ml-2 justify-around w-5",children:[e("div",{className:"w-[0.3rem] h-3 bg-gray-500 rounded-md self-end"}),e("div",{className:"w-[0.3rem] h-[0.5rem] bg-gray-500 rounded-md self-end"}),e("div",{className:"w-[0.27rem] h-4 bg-gray-500 rounded-md self-end"})]}),e("div",{className:"time-duration ml-3 text-gray-700 self-center",children:l.type==="record"&&m(l.recordDuration)})]}),e(Fe,{className:"fill-blue-500 self-center ml-2 w-5 h-5"})]}),i&&e(F,{time:u,message:l,author:s})]});if(s==="me")return n(o.exports.Fragment,{children:[e("div",{className:"flex",children:n("div",{className:"bg-[#D5F1FF] ml-auto mr-2 rounded-xl border border-gray-300 flex flex-shrink-0 w-[146px] h-[47px] p-2 items-center relative",children:[e("div",{className:"icon-play w-7 h-7 bg-blue-500 rounded-full flex justify-center items-center",children:e(re,{className:"fill-white ml-1"})}),n("div",{className:"progess-icon-group flex self-center mt-1 ml-2 justify-around w-5",children:[e("div",{className:"w-[0.3rem] h-3 bg-gray-500 rounded-md self-end"}),e("div",{className:"w-[0.3rem] h-[0.5rem] bg-gray-500 rounded-md self-end"}),e("div",{className:"w-[0.27rem] h-4 bg-gray-500 rounded-md self-end"})]}),e("div",{className:"time-duration ml-3 text-gray-700 self-center",children:l.type==="record"&&m(l.recordDuration)})]})}),i&&e(F,{time:u,message:l,author:s})]})}return e(o.exports.Fragment,{children:e("div",{className:"mb-1 flex flex-col",children:p()})})},ut={userName:"Ng\u01B0\u1EDDi l\u1EA1",status:6*60,avatarURL:"https://images.unsplash.com/photo-1597223557154-721c1cecc4b0?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=880&q=80",myName:"\u0110\u1EB7ng Nh\u1EADt Tr\u01B0\u1EDDng",myAvatarUrl:"https://images.unsplash.com/photo-1545996124-0501ebae84d0?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=764&q=80"},dt=localStorage.getItem("profile")?JSON.parse(localStorage.getItem("profile")):ut,de=G({name:"profile",initialState:{profile:dt},reducers:{importProfile(t,r){t.profile=r.payload.profile},changeProfile(t,r){t.profile=r.payload}}}),{changeProfile:pt,importProfile:ht}=de.actions;var gt=de.reducer;const P=Ce({reducer:{messageListReducer:lt,profileReducer:gt,currentMessageReducer:Ze}});function W(t,r){localStorage.setItem(t,JSON.stringify(r))}window.addEventListener("beforeunload",function(t){const r=P.getState(),a=r.messageListReducer.data,i=r.profileReducer.profile,s=r.currentMessageReducer.currentMessage;W("messageList",a),W("profile",i),W("currentMessage",s)});const pe=({messageReply:t})=>{const{idReply:r,data:a}=t,{myName:i}=Y(l=>l.profileReducer.profile);function s(l){var u,c,m;if(l==="text")return n("div",{className:"truncate pr-2",children:[e("p",{className:"truncate my-0 font-semibold",children:i}),e("p",{className:"truncate text-gray-500 ",children:(u=a.message)==null?void 0:u.textContent})]});if(l==="image")return n(o.exports.Fragment,{children:[e("img",{src:(c=a.message)==null?void 0:c.imageUrl,alt:"",className:"h-9 aspect-square self-center mr-3"}),n("div",{className:"truncate pr-2 flex-grow",children:[e("p",{className:"truncate my-0 font-semibold",children:i}),e("div",{className:"truncate text-gray-500 ",children:(m=a.message)==null?void 0:m.imageUrl})]})]});if(l==="record")return n(o.exports.Fragment,{children:[e("div",{className:"flex",children:e("div",{className:"h-9 aspect-square bg-gray-300 rounded-full self-center mr-3 flex justify-center items-center",children:e(Ae,{className:"scale-[1.7] opacity-40"})})}),n("div",{className:"overflow-hidden pr-2 flex-grow",children:[e("p",{className:"truncate my-0 font-semibold",children:i}),e("p",{className:"truncate text-gray-500",children:"[Tin nh\u1EAFn tho\u1EA1i]"})]})]})}return e(o.exports.Fragment,{children:r&&a.message.type!=="call"&&n("div",{className:"flex h-11 my-1 tracking-normal",children:[e("div",{className:"separate_reply"}),e("div",{className:"flex flex-grow overflow-hidden",children:s(a.message.type)})]})})},ft=new RegExp(/([(http(s)?):\/\/(www\.)?a-zA-Z0-9@:%._\-\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*))|(\/-strong)|(\/-heart)|(:>)|(:o)|(:-\(\()|(:-h)/,"gm"),xt=({data:t,isLastMessage:r,isFirstMessage:a,index:i})=>{const{author:s,message:l,time:u,emoji:c,messageReply:m}=t,g=P.getState().messageListReducer.data.length-1===i,d=o.exports.useRef();o.exports.useLayoutEffect(()=>{if(l.type==="text"){const v=l.textContent.replace(ft,b=>{switch(b){case x.Like:return"<span class='emoji' style='--position: 84% 82.5%/5100%'></span>";case x.Heart:return"<span class='emoji' style='--position: 84% 72.5% / 5100%'></span>";case x.Lol:return"<span class='emoji' style='--position: 82% 7.5% /5100%'></span>";case x.Wow:return"<span class='emoji' style='--position: 84% 20%/5100%'></span>";case x.Cry:return"<span class='emoji' style='--position: 84% 2.5% /5100%'></span>";case x.Angry:return"<span class='emoji' style='--position: 84% 5% /5100%'></span>"}return`<a class="linkInText">${b}</a>`});d.current&&(d.current.innerHTML=v)}},[l]);function y(){if(s==="you")return e(o.exports.Fragment,{children:n("div",{className:`flex ${g?"mb-6":""}`,children:[e(H,{isFirstMessage:a}),n("div",{className:"message-text-main relative ml-1 bg-white",children:[m.idReply&&e(pe,{messageReply:m}),e("div",{className:"text-base text-gray-800 pb-1",ref:d}),e(V,{type:c==null?void 0:c.type,number:c==null?void 0:c.number,author:s,isEndOfList:!!g}),r&&e(F,{time:u,message:l,author:s})]})]})});if(s==="me")return e(o.exports.Fragment,{children:e("div",{className:"flex",children:n("div",{className:"message-text-main relative ml-auto mr-2 bg-[#D5F1FF]",children:[m.idReply&&e(pe,{messageReply:m}),e("div",{className:"text-base text-gray-800 pb-1",ref:d}),e(V,{type:c==null?void 0:c.type,number:c==null?void 0:c.number,author:s}),r&&e(F,{time:u,message:l,author:s})]})})})}return e("div",{className:"mb-1 flex flex-col",children:y()})};var yt=o.exports.memo(xt);const vt=({separateTime:t})=>e(o.exports.Fragment,{children:e("div",{className:"m-auto mt-2 mb-4 flex",children:e("p",{className:"text-[10px] px-2 font-segoe h-[16px] flex items-center text-white bg-gray-400 bg-opacity-80 rounded-xl self-center m-auto",children:E(t).format("H:mm, DD/MM/YYYY")})})}),Et=t=>{const{index:r,data:a}=t,i=$(),s=Y(d=>d.currentMessageReducer.currentMessage);function l(d){if(a.author==="separate"||a.time.type==="separate")return e(vt,{separateTime:a.time.value});switch(d){case"image":return e(ot,w({},t));case"text":return e(yt,w({},t));case"call":return e(nt,w({},t));case"record":return e(mt,w({},t))}}const u=()=>{i(U(j(w({},a),{index:r})))},c=()=>{i(rt(r)),i(U(ne))},m=()=>{const d=z(r);i(J({index:r,data:d})),i(U(d))},p=()=>{const d=z(r+1);i(J({index:r+1,data:d})),i(U(d))},g=d=>{if(s.message.type!=="text")return S.warning("Tin nh\u1EAFn hi\u1EC7n t\u1EA1i ph\u1EA3i l\xE0 d\u1EA1ng text m\u1EDBi c\xF3 th\u1EC3 tr\u1EDF th\xE0nh tin nh\u1EAFn Reply");if(s.index<=d.index)return S.warn("Tin nh\u1EAFn reply ph\u1EA3i ph\xEDa tr\xEAn tin nh\u1EAFn hi\u1EC7n t\u1EA1i");if(d.type==="call")return S.warn("Kh\xF4ng th\u1EC3 reply cu\u1ED9c g\u1ECDi");S.success("L\u1EA5y ID Reply th\xE0nh c\xF4ng"),i(Ke(d))};return e(o.exports.Fragment,{children:n("div",{className:"message_container px-2 relative flex items-center "+(`type_${a.message.type}_${a.author} author_${a.author} `+(a.author==="me"?"flex-row-reverse":"")),children:[e(o.exports.Fragment,{children:l(a.message.type)}),n("div",{className:"icon_edit_message absolute left-1/2 -translate-x-1/2 flex items-center bg-gray-100 bg-opacity-70 px-2 rounded-lg shadow-lg z-10",children:[e(k,{title:"Th\xEAm tin nh\u1EAFn m\u1EDBi b\xEAn tr\xEAn tin nh\u1EAFn n\xE0y",children:e(Re,{className:"cursor-pointer mx-2 w-10 h-10 hover:scale-125",onClick:m})}),e(k,{title:"Th\xEAm tin nh\u1EAFn m\u1EDBi b\xEAn d\u01B0\u1EDBi tin nh\u1EAFn n\xE0y",children:e(Te,{className:"cursor-pointer mx-2 w-10 h-10 hover:scale-125",onClick:p})}),e(k,{title:"X\xF3a tin nh\u1EAFn n\xE0y",children:e(Le,{className:"cursor-pointer mx-2 w-8 h-8 stroke-[0.3] hover:scale-125",onClick:c})}),e(k,{title:"L\u1EA5y ID c\u1EE7a tin nh\u1EAFn l\xE0m ID Reply",children:e(Ie,{className:"cursor-pointer mx-2 w-11 h-11 hover:scale-125",onClick:()=>g(ze(a,r))})}),e(k,{title:"L\u1EA5y d\xF2ng n\xE0y l\xE0m tin nh\u1EAFn hi\u1EC7n t\u1EA1i",children:e(ke,{className:"cursor-pointer mx-2 w-8 h-8 hover:scale-125",onClick:u})})]})]})})};var bt=o.exports.memo(Et);const{Option:L}=R,{TextArea:Nt}=D,wt=({currentMessage:t})=>{const[r,a]=o.exports.useState(),[i,s]=o.exports.useState("incomming");o.exports.useEffect(()=>{a(t.message.type),t.message.type==="call"&&s(t.message.callType)},[t]);function l(u="text"){switch(u){case"text":return e(f.Item,{name:"textContent",wrapperCol:{span:24},children:e(Nt,{rows:4,allowClear:!0})});case"image":return e(ae,{span:24,children:e(f.Item,{name:"imageURL",wrapperCol:{span:24},children:e(D,{type:"text",placeholder:"URL",allowClear:!0})})});case"call":return n(o.exports.Fragment,{children:[e(f.Item,{name:"callType",label:"callType",labelAlign:"left",children:n(R,{placeholder:"Call Type",onChange:c=>s(c),children:[e(L,{value:"incomming",children:"Cu\u1ED9c g\u1ECDi \u0111\u1EBFn"}),e(L,{value:"outgoing",children:"Cu\u1ED9c g\u1ECDi \u0111i"}),e(L,{value:"missed",children:"Cu\u1ED9c g\u1ECDi nh\u1EE1"})]})}),i!=="missed"&&e(f.Item,{name:"callDuration",label:"Duration",labelAlign:"left",tooltip:"Th\u1EDDi l\u01B0\u1EE3ng cu\u1ED9c g\u1ECDi (gi\xE2y)",children:e(O,{name:"callDuration",min:1,className:"inputNumber"})})]});case"record":return e(f.Item,{name:"recordDuration",label:"Duration",labelAlign:"left",tooltip:"Th\u1EDDi l\u01B0\u1EE3ng \u0111o\u1EA1n ghi \xE2m (gi\xE2y)",children:e(D,{type:"text",className:""})})}}return n(o.exports.Fragment,{children:[e("div",{children:e(f.Item,{label:"Lo\u1EA1i message",name:"messageType",labelAlign:"left",required:!0,children:n(R,{placeholder:"Ch\u1ECDn lo\u1EA1i tin nh\u1EAFn",onChange:u=>a(u),children:[e(L,{value:"text",children:"V\u0103n b\u1EA3n"}),e(L,{value:"image",children:"\u1EA2nh"}),e(L,{value:"call",children:"Cu\u1ED9c g\u1ECDi"}),e(L,{value:"record",children:"Ghi \xE2m"})]})})}),e("div",{children:l(r)})]})},{Option:N}=R,Dt={user:"me",idMessage:"",idReply:"",timeType:"auto",timeValue:E(),emoji:"",numberEmoji:0,messageType:"text",callType:"incomming",stepRandomTime:600},Mt=()=>{const[t]=f.useForm(),{setFieldsValue:r,getFieldsValue:a}=t,i=$(),s=Y(h=>h.currentMessageReducer.currentMessage),l=Y(h=>h.currentMessageReducer.currentMessageReply);o.exports.useEffect(()=>{p(s,"load")},[s]),o.exports.useEffect(()=>{r({idReply:l.idReply})},[l]);const u=h=>{p(h,"edit")},c=h=>{console.log("Failed:",h)},m=()=>{t.resetFields()},p=(h,I)=>{if(I==="load"){const C=Je(h);r(C);return}if(I==="edit"){const C=h.index,K=Ge(j(w({},h),{index:C}),t.getFieldValue("idReply")?l:le);i(at({id:K.id,data:K}));return}if(I==="add"){const C=z(-1);i(J({data:C})),i(U(C));return}},g=()=>{p(void 0,"add")},d=()=>{Se.confirm({title:"Confirm",icon:e(Ye,{}),content:"X\xE1c nh\u1EADn x\xF3a to\xE0n b\u1ED9 d\u1EEF li\u1EC7u",okText:e("span",{className:"text-white hover:outline-2",children:"\u0110\u1ED3ng \xFD"}),cancelText:"H\u1EE7y b\u1ECF",onOk:y})},y=()=>{i(me({data:[]}))},v=h=>{t.getFieldValue("numberEmoji")||r({numberEmoji:1}),h||r({numberEmoji:void 0})},b=()=>{const h=t.getFieldValue("randomTime")||E(),I=t.getFieldValue("stepRandomTime")||600,C=h&&h.format("YYYY-MM-DD HH:mm:ss");i(st({startTime:C,stepTime:I}))},he=h=>{if(h==="separate"){t.setFieldsValue({timeType:"separate"});return}t.setFieldsValue({timeType:"auto"})},ge=h=>{h==="separate"&&t.setFieldsValue({user:"separate"})};return e(o.exports.Fragment,{children:n(f,{name:"basic",labelCol:{span:8},wrapperCol:{span:24},onFinish:u,onFinishFailed:c,initialValues:Dt,autoComplete:"off",form:t,children:[n("div",{children:[n("div",{className:"flex items-center",children:[e("span",{className:"w-28 mb-6 whitespace-nowrap",children:"ID Message: "}),e(f.Item,{name:"idMessage",className:"flex-grow",children:e(D,{disabled:!0})})]}),n("div",{className:"flex items-center mb-0",children:[e("span",{className:"w-28 mb-6 whitespace-nowrap",children:"ID Reply: "}),e(f.Item,{name:"idReply",className:"flex-grow",children:e(D,{allowClear:!0,disabled:!0,className:"inputTextField"})})]})]}),e(T,{style:{marginTop:"0"},children:e("b",{children:"Time"})}),e("div",{children:e(f.Item,{label:"V\u1ECB tr\xED time",name:"timeType",labelAlign:"left",children:n(R,{onChange:h=>ge(h),children:[e(N,{value:"auto",children:"Auto"}),e(N,{value:"separate",children:"Gi\u1EEFa"})]})})}),e("div",{children:e(f.Item,{label:"Ch\u1ECDn th\u1EDDi gian",name:"timeValue",labelAlign:"left",children:e(se,{showTime:!0,className:"datePicker",placeholder:"Ch\u1ECDn ng\xE0y gi\u1EDD"})})}),e(T,{children:e("b",{children:"Icon"})}),e("div",{children:e(f.Item,{name:"emoji",label:"Emoji",labelAlign:"left",children:n(R,{placeholder:"Icon",allowClear:!0,onChange:h=>v(h),children:[e(N,{value:x.Like,children:"\u{1F44D} Like"}),e(N,{value:x.Heart,children:"\u2764 Heart"}),e(N,{value:x.Lol,children:"\u{1F601} Lol"}),e(N,{value:x.Wow,children:"\u{1F62E} Wow"}),e(N,{value:x.Cry,children:"\u{1F62D} Cry"}),e(N,{value:x.Angry,children:"\u{1F621} Angry"})]})})}),e("div",{children:e(ae,{span:24,children:e(f.Item,{name:"numberEmoji",label:"S\u1ED1 l\u01B0\u1EE3ng",labelAlign:"left",children:e(O,{min:1,className:"inputNumber"})})})}),e(T,{children:e("b",{children:"Message"})}),n("div",{className:"flex gap-4",children:[n("div",{className:"flex flex-grow space-x-2 w-auto items-center",children:[e("span",{className:"mb-6",children:"User"}),e(f.Item,{name:"user",wrapperCol:{span:24},required:!0,children:n(R,{onChange:h=>he(h),children:[e(N,{value:"you",children:"You"}),e(N,{value:"me",children:"Me"}),e(N,{value:"separate",children:"Separate Time"})]})})]}),n("div",{className:"flex flex-grow space-x-2",children:[e("p",{className:"mb-6",children:"Index: "}),e(f.Item,{name:"index",children:e(D,{disabled:!0})})]})]}),e(wt,{currentMessage:s}),n("div",{className:"flex gap-2 justify-center",children:[e(M,{type:"primary",htmlType:"submit",className:"flex-grow text-white",children:"Edit"}),e(M,{onClick:g,children:"Add"}),e(M,{type:"dashed",onClick:m,children:"Reset Form"}),e(M,{type:"dashed",onClick:d,children:"ClearAllData"})]}),e(T,{children:e("b",{children:"Random Time"})}),e("div",{children:e(f.Item,{label:"Start Time",name:"randomTime",labelAlign:"left",children:e(se,{showTime:!0,className:"datePicker",placeholder:"Ch\u1ECDn ng\xE0y gi\u1EDD"})})}),e("div",{children:e(f.Item,{label:"Step Time",name:"stepRandomTime",labelAlign:"left",tooltip:"B\u01B0\u1EDBc nh\u1EA3y gi\u1EEFa c\xE1c tin nh\u1EAFn, \u0111\u01A1n v\u1ECB gi\xE2y",children:e(O,{step:100,min:100,className:"inputNumber"})})}),e("div",{className:"mt-2 flex justify-center",children:e(M,{className:"flex-1",onClick:b,children:"Random Time"})})]})})},Ft=({children:t})=>{const[r,a]=o.exports.useState([]),[i,s]=o.exports.useState(!1),l=$(),u=()=>{if(r[0].type!=="application/json"){S.error("Chi co the import file .JSON");return}const m=new FileReader;m.readAsText(r[0]),m.onload=function(){const p=m.result,g=JSON.parse(p.toString()),{messageListReducer:d,currentMessageReducer:y,profileReducer:v}=g;d&&l(me({data:d.data})),y&&l(Xe({currentMessage:y.currentMessage,currentMessageReply:y.currentMessageReply})),v?l(ht({profile:v.profile})):S.error("D\u1EEF li\u1EC7u kh\xF4ng ph\xF9 h\u1EE3p n\xEAn kh\xF4ng th\u1EC3 import, vui l\xF2ng ki\u1EC3m tra l\u1EA1i")}};return e(te,{children:n("div",{className:"flex space-x-2 justify-center items-start",children:[e(je,j(w({accept:".json,application/json",showUploadList:!0,maxCount:1,className:"max-w-[10rem]"},{onRemove:m=>{const p=r.indexOf(m),g=r.slice();g.splice(p,1),a(g)},beforeUpload:m=>(a([m]),!1),fileList:r}),{children:e(M,{icon:e(He,{}),children:"Import File"})})),e(M,{className:"m-0 text-white",type:"dashed",onClick:u,disabled:r.length===0,loading:i,children:i?"Uploading":"Start Upload"}),t]})})};function Ct(t){return{avatarURL:t.avatarURL,myAvatarUrl:t.myAvatarUrl,myName:t.myName,status:t.status,userName:t.userName}}const At=()=>{const[t]=f.useForm(),r=$(),a=q(u=>u.profileReducer.profile);o.exports.useEffect(()=>{t.setFieldsValue(Ct(a))},[a]);const i=()=>{const u=t.getFieldsValue();r(pt(u))},s=()=>{t.setFieldsValue(a)},l=()=>{const u=P.getState(),c=new Blob([JSON.stringify(u)],{type:"text/json;charset=utf-8"}),m=URL.createObjectURL(c),p=document.createElement("a");p.href=m,p.download=`Export FakeZalo Data ${E().format("YYYY-MM-DD HH:mm:ss")}.json`,p.click(),URL.revokeObjectURL(m)};return e(o.exports.Fragment,{children:n(f,{name:"basic",labelCol:{span:8},wrapperCol:{span:16},autoComplete:"off",form:t,initialValues:a,children:[e(T,{children:e("b",{children:"Your Profile"})}),e("div",{children:e(f.Item,{label:"User Name",name:"userName",labelAlign:"left",children:e(D,{})})}),e("div",{children:e(f.Item,{label:"Status",name:"status",labelAlign:"left",tooltip:"(Ph\xFAt), v\u1EDBi 0 l\xE0 v\u1EEBa m\u1EDBi truy c\u1EADp",children:e(O,{min:0,className:"inputNumber"})})}),n("div",{className:"flex mb-4 space-x",children:[e("img",{src:a.avatarURL,alt:"You avatar",className:"object-cover h-28 aspect-square mx-auto rounded-lg shadow"}),e("img",{src:a.myAvatarUrl,alt:"My Avatar",className:"object-cover h-28 aspect-square mx-auto rounded-lg shadow"})]}),e("div",{children:e(f.Item,{label:"Your Avatar",name:"avatarURL",labelAlign:"left",children:e(D,{allowClear:!0})})}),e(T,{children:e("b",{children:"My Profile"})}),e("div",{children:e(f.Item,{label:"My Name",name:"myName",labelAlign:"left",children:e(D,{})})}),e("div",{children:e(f.Item,{label:"My Avatar",name:"myAvatarUrl",labelAlign:"left",children:e(D,{allowClear:!0})})}),n("div",{className:"flex gap-2 justify-center",children:[e(M,{type:"default",onClick:i,children:"Change profile"}),e(M,{type:"default",onClick:s,children:"Get profile"})]}),e(T,{children:e("b",{children:"Import/Export"})}),e("div",{className:"flex gap-2 justify-center"}),e("div",{children:e(Ft,{children:e(M,{type:"default",onClick:l,children:"Export"})})})]})})},Rt=()=>{const t=q(s=>s.profileReducer.profile),{userName:r,status:a}=t;function i(s){const l=Math.floor(s/60);if(s===0)return"V\u1EEBa m\u1EDBi truy c\u1EADp";if(l<24){if(l<1)return`Truy c\u1EADp ${s} ph\xFAt tr\u01B0\u1EDBc`;if(l>=1)return`Truy c\u1EADp ${l} gi\u1EDD tr\u01B0\u1EDBc`}if(l>24)return"Truy c\u1EADp "+Math.floor(s/1440)+" ng\xE0y tr\u01B0\u1EDBc"}return e(o.exports.Fragment,{children:n("div",{className:"h-[48px] w-[480px] bg-gradient-to-r from-[#267AFF] to-[#01BAFA] flex border-b",children:[e("div",{className:"iconBack h-full w-[48px] flex justify-center items-center",children:e(Be,{className:"w-[50%] h-[50%] ml-1 fill-white"})}),n("div",{className:"header-content flex flex-col h-full flex-grow font-segoe ",children:[e("span",{className:"text-gray-50 ml-[0.4rem] mt-[4px] font-robo font-medium",children:r}),e("div",{className:"text-[0.7rem] ml-[0.4rem] mt-[-2px] text-white text-opacity-70 leading-3 tracking-[-0.015rem]",children:i(+a)})]}),e("div",{className:"icon-call w-[48px] h-full flex justify-center items-center",children:e(Ue,{className:"w-[45%] h-[45%] ml-1 stroke-white"})}),e("div",{className:"icon-video-call w-[48px] h-full flex justify-center items-center",children:e($e,{id:"icon_video",className:"stroke-white w-full h-[60%] ml-1"})}),e("div",{className:"icon-more w-[48px] h-full flex justify-center items-center ",children:e(Oe,{className:"fill-white w-full h-[45%] ml-1"})})]})})};var Tt=o.exports.memo(Rt);function Lt(t,r){let a=!1;return function(){a||(t.apply(t,arguments),a=!0,setTimeout(function(){a=!1},r))}}const It=867,kt=267;function St(){const[t,r]=o.exports.useState(!0),a=Y(c=>c.messageListReducer.data),i=Array.isArray(a)?a.length:0,s=o.exports.useRef(null);function l(c){const m=c.target,p=m.scrollHeight;m.scrollTop+It>=p-kt?r(!1):r(!0)}function u(){const c=s.current;c.scrollTop=c.scrollHeight}return n("div",{className:"pl-2 pt-2 flex",children:[n("div",{id:"zalo_main",className:"App font-segoe relative mr-2",children:[e(Tt,{}),e("div",{className:"main bg-[#E2E9F1] overflow-y-scroll flex-grow flex-col w-[480px]",onScroll:Lt(l,50),ref:s,children:a&&a.map((c,m)=>{var d,y;let p=!1,g=!1;return(c.author!==((d=a[m-1])==null?void 0:d.author)||a[m-1].time.type==="separate")&&(p=!0),(c.author!==((y=a[m+1])==null?void 0:y.author)||a[m+1].time.type==="separate")&&(g=!0),n(o.exports.Fragment,{children:[e(bt,{index:m,data:c,isLastMessage:g,isFirstMessage:p}),m===i-1&&c.author==="me"&&e("div",{className:"lastMessage",children:e(H,{width:"20px",height:"20px",isLastOfMessageList:!0})})]},m)})}),e("div",{className:"footer",onClick:()=>r(!t),children:e(k,{title:"Click \u0111\u1EC3 \u1EA9n hi\u1EC7n n\xFAt Scroll",children:e("img",{src:"https://i.postimg.cc/7YJ7yq5V/footer-zalo.png",alt:"footer",className:"h-[48px]"})})}),e(o.exports.Fragment,{children:t&&e("div",{className:"bg-white rounded-full shadow-lg absolute bottom-16 right-4 h-8 w-8 flex justify-center items-center cursor-pointer",onClick:u,children:e(_e,{className:"opacity-70"})})})]}),e("div",{className:"flex h-auto border-2 rounded p-2 mr-2",children:e(Mt,{})}),e("div",{className:"flex h-auto border-2 rounded p-2 mr-2",children:e(At,{})})]})}Ve.render(e(Pe,{store:P,children:e(St,{})}),document.getElementById("root"));
